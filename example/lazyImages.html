<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>懒加载图片示例</title>
    <style>
      body {
        margin: 0;
        font-family: sans-serif;
        background: #f4f4f4;
      }
      .container {
        width: 90%;
        max-width: 800px;
        margin: 0 auto;
        padding: 20px;
      }
      .image-wrapper {
        margin-bottom: 30px;
        text-align: center;
      }
      .image-wrapper img {
        width: 100%;
        height: auto;
        background: #ddd;
        transition: opacity 0.3s ease;
      }
    </style>
  </head>
  <body>
    <div class="container">
      <h2>懒加载 20 张图片</h2>

      <!-- 20 张懒加载图片 -->
      <div class="image-wrapper">
        <img
          class="lazy"
          src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7"
          data-src="https://picsum.photos/800/400?random=7"
          alt="示例图"
        />
      </div>
      <div class="image-wrapper">
        <img
          class="lazy"
          src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7"
          data-src="https://picsum.photos/800/400?random=8"
          alt="示例图"
        />
      </div>
      <div class="image-wrapper">
        <img
          class="lazy"
          src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7"
          data-src="https://picsum.photos/800/400?random=9"
          alt="示例图"
        />
      </div>
      <div class="image-wrapper">
        <img
          class="lazy"
          src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7"
          data-src="https://picsum.photos/800/400?random=10"
          alt="示例图"
        />
      </div>
      <div class="image-wrapper">
        <img
          class="lazy"
          src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7"
          data-src="https://picsum.photos/800/400?random=11"
          alt="示例图"
        />
      </div>
      <div class="image-wrapper">
        <img
          class="lazy"
          src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7"
          data-src="https://picsum.photos/800/400?random=12"
          alt="示例图"
        />
      </div>
      <div class="image-wrapper">
        <img
          class="lazy"
          src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7"
          data-src="https://picsum.photos/800/400?random=13"
          alt="示例图"
        />
      </div>
      <div class="image-wrapper">
        <img
          class="lazy"
          src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7"
          data-src="https://picsum.photos/800/400?random=14"
          alt="示例图"
        />
      </div>
      <div class="image-wrapper">
        <img
          class="lazy"
          src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7"
          data-src="https://picsum.photos/800/400?random=15"
          alt="示例图"
        />
      </div>
      <div class="image-wrapper">
        <img
          class="lazy"
          src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7"
          data-src="https://picsum.photos/800/400?random=16"
          alt="示例图"
        />
      </div>
      <div class="image-wrapper">
        <img
          class="lazy"
          src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7"
          data-src="https://picsum.photos/800/400?random=17"
          alt="示例图"
        />
      </div>
      <div class="image-wrapper">
        <img
          class="lazy"
          src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7"
          data-src="https://picsum.photos/800/400?random=18"
          alt="示例图"
        />
      </div>
      <div class="image-wrapper">
        <img
          class="lazy"
          src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7"
          data-src="https://picsum.photos/800/400?random=19"
          alt="示例图"
        />
      </div>
      <div class="image-wrapper">
        <img
          class="lazy"
          src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7"
          data-src="https://picsum.photos/800/400?random=20"
          alt="示例图"
        />
      </div>
      <div class="image-wrapper">
        <img
          class="lazy"
          src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7"
          data-src="https://picsum.photos/800/400?random=21"
          alt="示例图"
        />
      </div>
      <div class="image-wrapper">
        <img
          class="lazy"
          src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7"
          data-src="https://picsum.photos/800/400?random=22"
          alt="示例图"
        />
      </div>
      <div class="image-wrapper">
        <img
          class="lazy"
          src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7"
          data-src="https://picsum.photos/800/400?random=23"
          alt="示例图"
        />
      </div>
      <div class="image-wrapper">
        <img
          class="lazy"
          src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7"
          data-src="https://picsum.photos/800/400?random=24"
          alt="示例图"
        />
      </div>
      <div class="image-wrapper">
        <img
          class="lazy"
          src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7"
          data-src="https://picsum.photos/800/400?random=25"
          alt="示例图"
        />
      </div>
      <div class="image-wrapper">
        <img
          class="lazy"
          src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7"
          data-src="https://picsum.photos/800/400?random=26"
          alt="示例图"
        />
      </div>
    </div>

    <script>
      document.addEventListener("DOMContentLoaded", function () {
        const lazyImages = document.querySelectorAll("img.lazy");
        let imageCount = 0;

        const imageObserver = new IntersectionObserver((entries, observer) => {
          entries.forEach((entry) => {
            if (entry.isIntersecting) {
              const img = entry.target;
              const realSrc = img.getAttribute("data-src");
              img.src = realSrc;
              img.removeAttribute("data-src");
              img.classList.remove("lazy");
              observer.unobserve(img);
              imageCount++;

              console.log(`✅ 加载第 ${imageCount} 张图片:`);
              console.log(`  🔗 图片地址: ${realSrc}`);
              console.log(`  🕒 加载时间: ${new Date().toLocaleTimeString()}`);
              console.log("----------------------------");
            }
          });
        });

        lazyImages.forEach((image) => {
          imageObserver.observe(image);
        });
      });
    </script>
  </body>
</html>
